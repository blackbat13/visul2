class Animation{colors={sorted:"#ffd700",normal:"#29B6F6",first:"#43A047",second:"#D32F2F"};constructor(){this.array=[],this.$visulContainer=$("#visul-container"),this.blockWidth=50,this.arrayBlocks=[],this.timeLine=null,this.$timeRange=$("#time-range"),this.$startButton=$("#start-button"),this.$restartButton=$("#restart-button"),this.$pauseButton=$("#pause-button")}bindControls(){this.$startButton.click(function(){this.timeLine.play()}.bind(this)),this.$restartButton.click(function(){this.timeLine.restart()}.bind(this)),this.$pauseButton.click(function(){this.timeLine.pause()}.bind(this)),this.$timeRange.on("input",function(){this.timeLine.seek(this.timeLine.duration*(this.$timeRange.val()/100))}.bind(this)),this.$timeRange.val(0)}loadOrPrepareArray(){let t=new URLSearchParams(decodeURIComponent(window.location.hash.substr(1)));t.has("array")?this.array=JSON.parse(t.get("array")):this.prepareRandomArray(10)}prepareRandomOrder(t){this.array=[];for(let a=1;a<=t;a++)this.array.push(a);this.array=_.shuffle(this.array)}prepareReverseOrder(t){this.array=[];for(let a=t;a>=1;a--)this.array.push(a)}prepareRandomArray(t){this.array=[];for(let a=0;a<t;a++)this.array.push(Math.floor(15*Math.random())+1)}showArray(){let t=this.$visulContainer.width(),a=Math.floor((t-this.array.length*this.blockWidth)/2);this.firstLeft=a,this.$visulContainer.empty(),this.arrayBlocks=[];for(let t=0;t<this.array.length;t++)this.arrayBlocks.push(this.prepareSortingBlock(this.array[t],a,t)),this.$visulContainer.append(this.arrayBlocks[t]),a+=this.blockWidth;let r={array:JSON.stringify(this.array)};window.location.hash=$.param(r)}prepareSortingBlock(t,a,r){let i=$("<div></div>");return i.addClass("sorting-block"),i.css("height",(25*t).toString()+"px"),i.css("width",this.blockWidth.toString()+"px"),i.css("left",a.toString()+"px"),i.attr("id","sorting-block-"+r.toString()),i.attr("s-color",this.colors.normal),i.css("background-color",this.colors.normal),i.append(this.prepareSortingNumber(t)),i}prepareSortingNumber(t){let a=$("<span></span>");return a.addClass("sorting-number"),a.text(t.toString()),a}animateCompare(t,a){this.timeLine.add({targets:"#"+this.arrayBlocks[t].attr("id"),backgroundColor:this.colors.first,easing:"easeInOutQuad"}),this.timeLine.add({targets:"#"+this.arrayBlocks[a].attr("id"),backgroundColor:this.colors.second,easing:"easeInOutQuad"},"-=750")}animateSwap(t,a){this.timeLine.add({targets:"#"+this.arrayBlocks[t].attr("id"),left:this.firstLeft+a*this.blockWidth,easing:"easeInOutQuad"}),this.timeLine.add({targets:"#"+this.arrayBlocks[a].attr("id"),left:this.firstLeft+t*this.blockWidth,easing:"easeInOutQuad"},"-=750"),[this.array[t],this.array[a]]=[this.array[a],this.array[t]],[this.arrayBlocks[t],this.arrayBlocks[a]]=[this.arrayBlocks[a],this.arrayBlocks[t]]}animateLeave(t){this.timeLine.add({targets:"#"+this.arrayBlocks[t[0]].attr("id"),backgroundColor:this.arrayBlocks[t[0]].attr("s-color"),easing:"easeInOutQuad"});for(let a=1;a<t.length;a++)this.timeLine.add({targets:"#"+this.arrayBlocks[t[a]].attr("id"),backgroundColor:this.arrayBlocks[t[a]].attr("s-color"),easing:"easeInOutQuad"},"-=750")}animateMark(t,a){this.timeLine.add({targets:"#"+this.arrayBlocks[t[0]].attr("id"),backgroundColor:a[0],easing:"easeInOutQuad"});for(let r=1;r<t.length;r++)this.timeLine.add({targets:"#"+this.arrayBlocks[t[r]].attr("id"),backgroundColor:a[r],easing:"easeInOutQuad"},"-=750")}animateMarkSorted(t){this.timeLine.add({targets:"#"+this.arrayBlocks[t].attr("id"),backgroundColor:this.colors.sorted,easing:"easeInOutQuad"}),this.arrayBlocks[t].attr("s-color",this.colors.sorted)}animateMarkSortedAll(){for(let t=0;t<this.array.length;t++)this.animateMarkSorted(t)}}
class Sorting extends Animation{constructor(){super()}prepareInsertionSort(){this.timeLine=anime.timeline({easing:"easeOutExpo",duration:750,update:function(t){this.$timeRange.val(this.timeLine.progress)}.bind(this)}),this.animateMarkSorted(0);for(let t=0;t<this.array.length-1;t++){let i=t+1;for(this.animateMark([i],[this.colors.second]);i>0&&this.array[i]<this.array[i-1];)this.animateMark([i-1],[this.colors.first]),this.animateSwap(i,i-1),this.animateLeave([i]),i--;i>0&&(this.animateMark([i-1],[this.colors.first]),this.animateLeave([i-1])),this.animateMarkSorted(i)}this.timeLine.restart(),this.timeLine.pause()}prepareBubbleSort(){this.timeLine=anime.timeline({easing:"easeOutExpo",duration:750,update:function(t){this.$timeRange.val(this.timeLine.progress)}.bind(this)});for(let t=0;t<this.array.length;t++){for(let i=0;i<this.array.length-t-1;i++)this.animateCompare(i,i+1),this.array[i]>this.array[i+1]&&this.animateSwap(i,i+1),this.animateLeave([i,i+1]);this.animateMarkSorted(this.arrayBlocks.length-t-1)}this.timeLine.restart(),this.timeLine.pause()}prepareSelectionSort(){this.timeLine=anime.timeline({easing:"easeOutExpo",duration:750,update:function(t){this.$timeRange.val(this.timeLine.progress)}.bind(this)});for(let t=0;t<this.array.length-1;t++){let i=this.array[t],e=t;this.animateMark([t],[this.colors.second]);for(let a=t+1;a<this.array.length;a++)this.animateMark([a],[this.colors.first]),this.array[a]<i?(this.animateLeave([e]),this.animateMark([a],[this.colors.second]),i=this.array[a],e=a):this.animateLeave([a]);e!==t&&this.animateSwap(t,e),this.animateMarkSorted(t)}this.animateMarkSorted(this.array.length-1),this.timeLine.restart(),this.timeLine.pause()}prepareGnomeSort(){this.timeLine=anime.timeline({easing:"easeOutExpo",duration:750,update:function(t){this.$timeRange.val(this.timeLine.progress)}.bind(this)});let t=0;for(this.animateMark([t],[this.colors.second]);t<this.array.length;)0===t||this.array[t]>=this.array[t-1]?(this.animateLeave([t]),t+=1,t<this.array.length&&this.animateMark([t],[this.colors.second])):(this.animateSwap(t,t-1),t-=1);this.animateMarkSortedAll(),this.timeLine.restart(),this.timeLine.pause()}prepareCocktailShakerSort(){this.timeLine=anime.timeline({easing:"easeOutExpo",duration:750,update:function(t){this.$timeRange.val(this.timeLine.progress)}.bind(this)});for(let t=0;t<=this.array.length/2;t++){for(let i=t;i<this.array.length-t-1;i++)this.animateCompare(i,i+1),this.array[i]>this.array[i+1]&&this.animateSwap(i,i+1),this.animateLeave([i,i+1]);this.animateMarkSorted(this.array.length-t-1);for(let i=this.array.length-t-2;i>t;i--)this.animateCompare(i,i-1),this.array[i]<this.array[i-1]&&this.animateSwap(i,i-1),this.animateLeave([i,i-1]);this.animateMarkSorted(t)}this.timeLine.restart(),this.timeLine.pause()}prepareCombSort(){this.timeLine=anime.timeline({easing:"easeOutExpo",duration:750,update:function(t){this.$timeRange.val(this.timeLine.progress)}.bind(this)});let t=this.array.length,i=!1;for(;!i;){t=Math.floor(t/1.3),t<=1&&(t=1,i=!0);let e=0;for(;e+t<this.array.length;)this.animateCompare(e,e+t),this.array[e]>this.array[e+t]&&(this.animateSwap(e,e+t),i=!1),this.animateLeave([e,e+t]),e++}this.animateMarkSortedAll(),this.timeLine.restart(),this.timeLine.pause()}}
class Searching extends Animation{constructor(){super()}prepareFindMin(){this.timeLine=anime.timeline({easing:"easeOutExpo",duration:750,update:function(i){this.$timeRange.val(this.timeLine.progress)}.bind(this)});let i=this.array[0],t=0;this.animateMark([0],[this.colors.second]);for(let e=1;e<this.array.length;e++)this.animateMark([e],[this.colors.first]),this.array[e]<i?(this.animateLeave([t]),this.animateMark([e],[this.colors.second]),i=this.array[e],t=e):this.animateLeave([e]);this.animateMarkSorted(t),this.timeLine.restart(),this.timeLine.pause()}prepareFindMax(){this.timeLine=anime.timeline({easing:"easeOutExpo",duration:750,update:function(i){this.$timeRange.val(this.timeLine.progress)}.bind(this)});let i=this.array[0],t=0;this.animateMark([0],[this.colors.second]);for(let e=1;e<this.array.length;e++)this.animateMark([e],[this.colors.first]),this.array[e]>i?(this.animateLeave([t]),this.animateMark([e],[this.colors.second]),i=this.array[e],t=e):this.animateLeave([e]);this.animateMarkSorted(t),this.timeLine.restart(),this.timeLine.pause()}}
